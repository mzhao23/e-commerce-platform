{% extends "base.html" %}
{% block title %}Products{% endblock %}
{% block content %}
    <h2 class="mb-4"><i class="bi bi-grid"></i> All Products</h2>
    <div class="row">
        {% for product in products.items %}
            <div class="col-md-3 mb-4">
                <div class="card h-100 product-card">
                    <img src="{{ url_for('static', filename='images/' ~ (product.image or 'default.jpg')) }}"
                         class="card-img-top" alt="{{ product.name }}" style="height: 180px; object-fit: cover;">
                    <div class="card-body">
                        <h6>{{ product.name[:30] }}{% if product.name|length > 30 %}...{% endif %}</h6>
                        <p class="text-primary fw-bold">${{ "%.2f"|format(product.price) }}</p>
                    </div>
                    <div class="card-footer bg-white">
                        <a href="{{ url_for('product_detail', product_id=product.id) }}"
                           class="btn btn-sm btn-outline-primary">View</a>
                        <form action="{{ url_for('add_to_cart', product_id=product.id) }}" method="POST"
                              class="d-inline">
                            <button type="submit" class="btn btn-sm btn-success"><i class="bi bi-cart-plus"></i>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>

    <nav class="mt-4">
        <ul class="pagination justify-content-center">
            {% if products.has_prev %}
                <li class="page-item"><a class="page-link" href="{{ url_for('products', page=products.prev_num) }}">Previous</a>
                </li>
            {% endif %}
            <li class="page-item disabled"><span
                    class="page-link">Page {{ products.page }} of {{ products.pages }}</span></li>
            {% if products.has_next %}
                <li class="page-item"><a class="page-link"
                                         href="{{ url_for('products', page=products.next_num) }}">Next</a></li>
            {% endif %}
        </ul>
    </nav>
{% endblock %}
